# CAPTCHA Solver - Arquitetura de IntegraÃ§Ã£o

## Fluxo Visual: Como Funciona

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                         â”‚
â”‚                        BROWSER AGENT - FLUXO COM CAPTCHA SOLVER                         â”‚
â”‚                                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   USUÃRIO   â”‚
                                    â”‚  (Liftlio)  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚     POST /agent/task   â”‚
                              â”‚  "Comente neste vÃ­deo" â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                              BROWSER AGENT (Container Docker)                            â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                                     â”‚ â”‚
â”‚  â”‚   1. NAVEGA PRO YOUTUBE                                                             â”‚ â”‚
â”‚  â”‚      â””â”€â–º page.goto('https://youtube.com/watch?v=xxx')                              â”‚ â”‚
â”‚  â”‚                                                                                     â”‚ â”‚
â”‚  â”‚   2. TENTA CLICAR NO CAMPO DE COMENTÃRIO                                           â”‚ â”‚
â”‚  â”‚      â””â”€â–º page.click('#comment-input')                                              â”‚ â”‚
â”‚  â”‚                                                                                     â”‚ â”‚
â”‚  â”‚   3. DETECTA CAPTCHA? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚
â”‚  â”‚      â”‚                                                          â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚           DETECTOR DE CAPTCHA                       â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚                                                     â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚  Procura por:                                       â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚  â€¢ iframe[src*="recaptcha"]                        â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚  â€¢ iframe[src*="hcaptcha"]                         â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚  â€¢ div.g-recaptcha                                 â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚  â€¢ #captcha-container                              â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â”‚                                                     â”‚ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â”‚ â”‚
â”‚  â”‚      â”‚                                                          â”‚                   â”‚ â”‚
â”‚  â”‚      â–¼                                                          â–¼                   â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”                                                  â”Œâ”€â”€â”€â”€â”€â”                  â”‚ â”‚
â”‚  â”‚   â”‚ NÃƒO â”‚                                                  â”‚ SIM â”‚                  â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”¬â”€â”€â”˜                                                  â””â”€â”€â”¬â”€â”€â”˜                  â”‚ â”‚
â”‚  â”‚      â”‚                                                        â”‚                     â”‚ â”‚
â”‚  â”‚      â”‚                                                        â–¼                     â”‚ â”‚
â”‚  â”‚      â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                                            â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚         CAPTCHA SOLVER MODULE              â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                                            â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚  1. Extrai dados do CAPTCHA:         â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     â€¢ siteKey (do HTML)              â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     â€¢ pageUrl (URL atual)            â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     â€¢ tipo (v2, v3, hcaptcha)        â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                    â”‚                       â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                    â–¼                       â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚  2. Envia para CapMonster Cloud:     â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚                                      â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     POST api.capmonster.cloud        â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     {                                â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚       "clientKey": "xxx",            â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚       "task": {                      â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚         "type": "RecaptchaV2",       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚         "websiteURL": "youtube.com", â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚         "websiteKey": "6Le..."       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚       }                              â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     }                                â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                    â”‚                       â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                    â–¼                       â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚  3. Aguarda resoluÃ§Ã£o (1-5 seg):     â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚                                      â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     CapMonster AI resolve o CAPTCHA  â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     usando machine learning          â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚                                      â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     Retorna: "03AGdBq26..."          â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚              (token de 500+ chars)   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                    â”‚                       â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                    â–¼                       â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚  4. Injeta token na pÃ¡gina:          â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚                                      â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     page.evaluate(() => {            â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚       document.getElementById(       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚         'g-recaptcha-response'       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚       ).value = token;               â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚                                      â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚       // Dispara callback            â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚       window.captchaCallback(token); â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â”‚     });                              â”‚  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â”‚                                            â”‚  â”‚ â”‚
â”‚  â”‚      â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚      â”‚                                                   â”‚                          â”‚ â”‚
â”‚  â”‚      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚ â”‚
â”‚  â”‚      â”‚                                                                              â”‚ â”‚
â”‚  â”‚      â–¼                                                                              â”‚ â”‚
â”‚  â”‚   4. CONTINUA A TAREFA NORMALMENTE                                                  â”‚ â”‚
â”‚  â”‚      â””â”€â–º Digita comentÃ¡rio, clica enviar, etc.                                     â”‚ â”‚
â”‚  â”‚                                                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   RESPOSTA AO USUÃRIO  â”‚
                              â”‚  { success: true,      â”‚
                              â”‚    captchaSolved: true â”‚
                              â”‚  }                     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Arquitetura de Arquivos

```
browser-agent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                 # Entry point (jÃ¡ existe)
â”‚   â”œâ”€â”€ agent.ts                 # Browser Agent (jÃ¡ existe)
â”‚   â”œâ”€â”€ browser-manager.ts       # Gerencia Playwright (jÃ¡ existe)
â”‚   â”‚
â”‚   â”œâ”€â”€ captcha/                 # ğŸ†• NOVO MÃ“DULO
â”‚   â”‚   â”œâ”€â”€ index.ts             # Exporta tudo
â”‚   â”‚   â”œâ”€â”€ detector.ts          # Detecta CAPTCHAs na pÃ¡gina
â”‚   â”‚   â”œâ”€â”€ solver.ts            # Interface com CapMonster
â”‚   â”‚   â””â”€â”€ injector.ts          # Injeta token na pÃ¡gina
â”‚   â”‚
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .env                         # ğŸ†• Adicionar:
â”‚                                #    CAPMONSTER_API_KEY=xxx
â””â”€â”€ ...
```

---

## Fluxo de DecisÃ£o: Quando Resolver CAPTCHA?

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AGENTE EXECUTA AÃ‡ÃƒO       â”‚
                    â”‚   (click, type, navigate)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AÃ‡ÃƒO BLOQUEADA?           â”‚
                    â”‚   (timeout, elemento        â”‚
                    â”‚    nÃ£o clicÃ¡vel, etc.)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                 â”‚
                         â–¼                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   NÃƒO   â”‚       â”‚   SIM   â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚                 â”‚
                         â”‚                 â–¼
                         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    â”‚   VERIFICAR SE Ã‰ CAPTCHA    â”‚
                         â”‚    â”‚                             â”‚
                         â”‚    â”‚   detectCaptcha(page)       â”‚
                         â”‚    â”‚   â””â”€â–º Retorna:              â”‚
                         â”‚    â”‚       â€¢ tipo: 'recaptcha_v2'â”‚
                         â”‚    â”‚       â€¢ siteKey: '6Le...'   â”‚
                         â”‚    â”‚       â€¢ visible: true       â”‚
                         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚                  â”‚
                         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚         â”‚                 â”‚
                         â”‚         â–¼                 â–¼
                         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    â”‚   NÃƒO   â”‚       â”‚   SIM   â”‚
                         â”‚    â”‚ CAPTCHA â”‚       â”‚ CAPTCHA â”‚
                         â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚         â”‚                 â”‚
                         â”‚         â”‚                 â–¼
                         â”‚         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚         â”‚    â”‚   RESOLVER COM CAPMONSTER   â”‚
                         â”‚         â”‚    â”‚                             â”‚
                         â”‚         â”‚    â”‚   1. Criar task             â”‚
                         â”‚         â”‚    â”‚   2. Aguardar resultado     â”‚
                         â”‚         â”‚    â”‚   3. Injetar token          â”‚
                         â”‚         â”‚    â”‚   4. Submeter formulÃ¡rio    â”‚
                         â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚         â”‚                  â”‚
                         â”‚         â”‚                  â–¼
                         â”‚         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚         â”‚    â”‚   RETENTAR AÃ‡ÃƒO ORIGINAL    â”‚
                         â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚         â”‚                  â”‚
                         â–¼         â–¼                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   CONTINUAR     â”‚
           â”‚   EXECUÃ‡ÃƒO      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tipos de CAPTCHA Suportados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TIPOS DE CAPTCHA SUPORTADOS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  reCAPTCHA v2 (Checkbox)                                              â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â€¢ Mais comum no YouTube             â”‚  â”‚
â”‚  â”‚  â”‚  â˜ I'm not a robot       â”‚    â€¢ Resolve em 1-5 segundos           â”‚  â”‚
â”‚  â”‚  â”‚     ğŸ”„ reCAPTCHA          â”‚    â€¢ Custo: $0.60/1000                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  DetecÃ§Ã£o: iframe[src*="recaptcha/api2"]                             â”‚  â”‚
â”‚  â”‚  Site Key: data-sitekey no div.g-recaptcha                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  reCAPTCHA v3 (Invisible)                                             â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Sem checkbox visÃ­vel                                               â”‚  â”‚
â”‚  â”‚  â€¢ Roda em background                                                 â”‚  â”‚
â”‚  â”‚  â€¢ Score de 0.0 a 1.0                                                 â”‚  â”‚
â”‚  â”‚  â€¢ Custo: $0.90/1000                                                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  DetecÃ§Ã£o: grecaptcha.execute() ou script com render=                â”‚  â”‚
â”‚  â”‚  Site Key: No parÃ¢metro render= do script                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  hCaptcha                                                             â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•                                                             â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â€¢ Alternativa ao reCAPTCHA          â”‚  â”‚
â”‚  â”‚  â”‚  â˜ Verify you are human  â”‚    â€¢ Usado em alguns sites             â”‚  â”‚
â”‚  â”‚  â”‚     hCaptcha             â”‚    â€¢ Custo: $0.80/1000                  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  DetecÃ§Ã£o: iframe[src*="hcaptcha"]                                   â”‚  â”‚
â”‚  â”‚  Site Key: data-sitekey no div.h-captcha                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Cloudflare Turnstile                                                 â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                 â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Novo, substituindo reCAPTCHA em alguns sites                      â”‚  â”‚
â”‚  â”‚  â€¢ Custo: $0.80/1000                                                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  DetecÃ§Ã£o: iframe[src*="challenges.cloudflare.com"]                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ComunicaÃ§Ã£o com CapMonster Cloud

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUXO DE API - CAPMONSTER CLOUD                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      Browser Agent                           CapMonster Cloud
           â”‚                                        â”‚
           â”‚  1. CREATE TASK                        â”‚
           â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
           â”‚  POST /createTask                      â”‚
           â”‚  {                                     â”‚
           â”‚    "clientKey": "xxx",                 â”‚
           â”‚    "task": {                           â”‚
           â”‚      "type": "RecaptchaV2TaskProxyless"â”‚
           â”‚      "websiteURL": "youtube.com",     â”‚
           â”‚      "websiteKey": "6Lc..."           â”‚
           â”‚    }                                   â”‚
           â”‚  }                                     â”‚
           â”‚                                        â”‚
           â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
           â”‚  { "taskId": 123456789 }               â”‚
           â”‚                                        â”‚
           â”‚                                        â”‚
           â”‚  2. POLL FOR RESULT (a cada 2s)        â”‚
           â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
           â”‚  POST /getTaskResult                   â”‚
           â”‚  { "clientKey": "xxx",                 â”‚
           â”‚    "taskId": 123456789 }               â”‚
           â”‚                                        â”‚
           â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
           â”‚  { "status": "processing" }            â”‚
           â”‚                                        â”‚
           â”‚  ... (repete atÃ© ready) ...            â”‚
           â”‚                                        â”‚
           â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
           â”‚  {                                     â”‚
           â”‚    "status": "ready",                  â”‚
           â”‚    "solution": {                       â”‚
           â”‚      "gRecaptchaResponse": "03AGd..."  â”‚
           â”‚    }                                   â”‚
           â”‚  }                                     â”‚
           â”‚                                        â”‚
           â”‚  3. INJETA NA PÃGINA                   â”‚
           â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ (local, nÃ£o API)
           â”‚                                        â”‚
           â”‚  document.getElementById(              â”‚
           â”‚    'g-recaptcha-response'              â”‚
           â”‚  ).value = "03AGd...";                 â”‚
           â”‚                                        â”‚
           â”‚  window.___grecaptcha_cfg.clients[0]   â”‚
           â”‚    .U.U.callback("03AGd...");          â”‚
           â”‚                                        â”‚
           â–¼                                        â–¼

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CAPTCHA RESOLVIDO - CONTINUA A TAREFA      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Custo Estimado por OperaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CUSTO POR OPERAÃ‡ÃƒO                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   CENÃRIO: Comentar em vÃ­deo do YouTube                                     â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   SEM CAPTCHA (maioria dos casos)                                   â”‚   â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   Custo: $0.00 (sÃ³ API Claude Haiku)                               â”‚   â”‚
â”‚   â”‚   Tempo: ~15-30 segundos                                           â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   âœ… Conta logada + cookies salvos = raramente pede CAPTCHA        â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   COM CAPTCHA (casos raros)                                         â”‚   â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   Custo adicional: $0.0006 por CAPTCHA (reCAPTCHA v2)              â”‚   â”‚
â”‚   â”‚   Tempo adicional: +1-5 segundos                                    â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   âš ï¸ Quando aparece:                                               â”‚   â”‚
â”‚   â”‚      â€¢ Conta nova                                                   â”‚   â”‚
â”‚   â”‚      â€¢ Muitas aÃ§Ãµes em pouco tempo                                  â”‚   â”‚
â”‚   â”‚      â€¢ IP suspeito                                                  â”‚   â”‚
â”‚   â”‚      â€¢ Primeiro login do dia                                        â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   ESTIMATIVA MENSAL                                                 â”‚   â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                 â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   100 aÃ§Ãµes/mÃªs  â†’ ~10 CAPTCHAs â†’ $0.006                           â”‚   â”‚
â”‚   â”‚   1000 aÃ§Ãµes/mÃªs â†’ ~100 CAPTCHAs â†’ $0.06                           â”‚   â”‚
â”‚   â”‚   10K aÃ§Ãµes/mÃªs  â†’ ~1000 CAPTCHAs â†’ $0.60                          â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   ğŸ’¡ Taxa de CAPTCHA estimada: ~10% das aÃ§Ãµes                      â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CÃ³digo: Estrutura dos MÃ³dulos

### detector.ts
```typescript
// Detecta se hÃ¡ CAPTCHA na pÃ¡gina
export async function detectCaptcha(page: Page): Promise<CaptchaInfo | null> {
  // Verifica reCAPTCHA v2
  const recaptchaV2 = await page.$('iframe[src*="recaptcha/api2"]');
  if (recaptchaV2) {
    const siteKey = await page.$eval('.g-recaptcha', el => el.dataset.sitekey);
    return { type: 'recaptcha_v2', siteKey, visible: true };
  }

  // Verifica hCaptcha
  const hcaptcha = await page.$('iframe[src*="hcaptcha"]');
  if (hcaptcha) {
    const siteKey = await page.$eval('.h-captcha', el => el.dataset.sitekey);
    return { type: 'hcaptcha', siteKey, visible: true };
  }

  return null; // Sem CAPTCHA
}
```

### solver.ts
```typescript
// Resolve CAPTCHA via CapMonster
export async function solveCaptcha(info: CaptchaInfo, pageUrl: string): Promise<string> {
  // 1. Criar task
  const taskResponse = await fetch('https://api.capmonster.cloud/createTask', {
    method: 'POST',
    body: JSON.stringify({
      clientKey: process.env.CAPMONSTER_API_KEY,
      task: {
        type: 'RecaptchaV2TaskProxyless',
        websiteURL: pageUrl,
        websiteKey: info.siteKey
      }
    })
  });

  const { taskId } = await taskResponse.json();

  // 2. Poll atÃ© resolver
  while (true) {
    const result = await fetch('https://api.capmonster.cloud/getTaskResult', {
      method: 'POST',
      body: JSON.stringify({ clientKey: process.env.CAPMONSTER_API_KEY, taskId })
    });

    const data = await result.json();
    if (data.status === 'ready') {
      return data.solution.gRecaptchaResponse;
    }

    await sleep(2000); // Aguarda 2s entre polls
  }
}
```

### injector.ts
```typescript
// Injeta token resolvido na pÃ¡gina
export async function injectCaptchaToken(page: Page, token: string): Promise<void> {
  await page.evaluate((t) => {
    // Preenche campo hidden
    const responseField = document.getElementById('g-recaptcha-response');
    if (responseField) {
      responseField.value = t;
    }

    // Dispara callback do reCAPTCHA
    const callback = window.___grecaptcha_cfg?.clients?.[0]?.U?.U?.callback;
    if (callback) {
      callback(t);
    }
  }, token);
}
```

---

## IntegraÃ§Ã£o no Agent

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ONDE INTEGRAR NO CÃ“DIGO ATUAL                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   agent.ts (linha ~200, mÃ©todo executeAction)                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚                                                                             â”‚
â”‚   async executeAction(action: Action): Promise<ActionResult> {              â”‚
â”‚     try {                                                                   â”‚
â”‚       // Executa aÃ§Ã£o normal                                                â”‚
â”‚       await this.performAction(action);                                     â”‚
â”‚       return { success: true };                                             â”‚
â”‚                                                                             â”‚
â”‚     } catch (error) {                                                       â”‚
â”‚       // ğŸ†• NOVO: Verifica se falhou por CAPTCHA                           â”‚
â”‚       const captcha = await detectCaptcha(this.page);                       â”‚
â”‚                                                                             â”‚
â”‚       if (captcha) {                                                        â”‚
â”‚         console.log('[AGENT] CAPTCHA detectado, resolvendo...');            â”‚
â”‚                                                                             â”‚
â”‚         // Resolve via CapMonster                                           â”‚
â”‚         const token = await solveCaptcha(captcha, this.page.url());         â”‚
â”‚                                                                             â”‚
â”‚         // Injeta token                                                     â”‚
â”‚         await injectCaptchaToken(this.page, token);                         â”‚
â”‚                                                                             â”‚
â”‚         // Retenta aÃ§Ã£o original                                            â”‚
â”‚         await this.performAction(action);                                   â”‚
â”‚         return { success: true, captchaSolved: true };                      â”‚
â”‚       }                                                                     â”‚
â”‚                                                                             â”‚
â”‚       throw error; // Falhou por outro motivo                               â”‚
â”‚     }                                                                       â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Checklist de ImplementaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CHECKLIST DE IMPLEMENTAÃ‡ÃƒO                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   PREPARAÃ‡ÃƒO                                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚   [ ] Criar conta no CapMonster Cloud                                       â”‚
â”‚   [ ] Adicionar crÃ©dito (~$5 pra comeÃ§ar)                                   â”‚
â”‚   [ ] Obter API Key                                                         â”‚
â”‚   [ ] Adicionar CAPMONSTER_API_KEY no .env                                  â”‚
â”‚                                                                             â”‚
â”‚   DESENVOLVIMENTO                                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚   [ ] Criar pasta src/captcha/                                              â”‚
â”‚   [ ] Implementar detector.ts                                               â”‚
â”‚   [ ] Implementar solver.ts                                                 â”‚
â”‚   [ ] Implementar injector.ts                                               â”‚
â”‚   [ ] Criar index.ts (exports)                                              â”‚
â”‚   [ ] Integrar no agent.ts                                                  â”‚
â”‚                                                                             â”‚
â”‚   TESTES                                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€                                                                    â”‚
â”‚   [ ] Testar detecÃ§Ã£o de reCAPTCHA v2                                       â”‚
â”‚   [ ] Testar resoluÃ§Ã£o via API                                              â”‚
â”‚   [ ] Testar injeÃ§Ã£o de token                                               â”‚
â”‚   [ ] Testar fluxo completo (aÃ§Ã£o â†’ captcha â†’ resolve â†’ continua)           â”‚
â”‚                                                                             â”‚
â”‚   DEPLOY                                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€                                                                    â”‚
â”‚   [ ] Adicionar env var no docker-compose.yml                               â”‚
â”‚   [ ] Rebuild container                                                     â”‚
â”‚   [ ] Testar em produÃ§Ã£o                                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Resumo Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                           RESUMO DA ARQUITETURA                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   UsuÃ¡rio   â”‚â”€â”€â”€â”€â–ºâ”‚   Browser   â”‚â”€â”€â”€â”€â–ºâ”‚  Detecta    â”‚â”€â”€â”€â”€â–ºâ”‚ CapMonsterâ”‚  â”‚
â”‚  â”‚   Liftlio   â”‚     â”‚   Agent     â”‚     â”‚  CAPTCHA?   â”‚     â”‚   Cloud   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚                   â”‚       â”‚
â”‚                                            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”              â”‚       â”‚
â”‚                                            â”‚         â”‚              â”‚       â”‚
â”‚                                          NÃƒO       SIMâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚       â”‚
â”‚                                            â”‚         â”‚              â”‚       â”‚
â”‚                                            â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                            â”‚         â”‚    (token)           â”‚
â”‚                                            â–¼         â–¼                      â”‚
â”‚                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                                     â”‚   Continua tarefa   â”‚                 â”‚
â”‚                                     â”‚   normalmente       â”‚                 â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                             â”‚
â”‚  ğŸ’° CUSTO: ~$0.0006 por CAPTCHA resolvido                                  â”‚
â”‚  â±ï¸  TEMPO: +1-5 segundos quando CAPTCHA aparece                           â”‚
â”‚  ğŸ“ˆ TAXA: ~10% das aÃ§Ãµes precisam resolver CAPTCHA                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
